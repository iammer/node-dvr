<html>
<head>
	<title>DVR Web</title>
	
	<link rel='stylesheet' type='text/css' href='site.css'/>
	
	<script type="text/javascript" src="/jwplayer/jwplayer.js"></script>
	<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="dvrui.js"></script>
	<script type='text/javascript'>
		/*$(function() {
			jwplayer('player').setup({file: '/channel/1.flv',
				height: 240,
				width: 352,
				controls: false});
				
			jwplayer().onReady(function() {
				jwplayer().play();
			});
		});*/
		
		$(function() {
			var ui=new DVRUI();
			
			$(ui).on('login',function() {
				jwplayer('player').setup({
					playlist: [
						{sources: [{ file: '/channel/1', type: 'flv' }]},
						{sources: [{ file: '/channel/2', type: 'flv' }]},
						{sources: [{ file: '/channel/3', type: 'flv' }]},
						{sources: [{ file: '/channel/4', type: 'flv' }]},
						{sources: [{ file: '/channel/5', type: 'flv' }]},
						{sources: [{ file: '/channel/6', type: 'flv' }]}
					],
					height: 240,
					width: 352,
					controls: false});
					
				jwplayer().onReady(function() {
					jwplayer().play();
				});
			});
			
			$(ui).on('logout',function() {
				jwplayer().stop();
				jwplayer().remove();
			});
			
			$(ui).on('channel',function(e,cid) {
				console.log('Playing channel ' + cid); 
				jwplayer().playlistItem(cid-1);
			});

		});
	</script>
</head>
<body>
	<div id='loading'>Loading...</div>
	<div id='loginForm' class='initiallyHidden'>
		User: <input type='text' id='loginUser'/><br/>
		Password: <input type='password' id='loginPass'/><br/>
		<input type='button' id='loginButton' value='Login'/>
		<div id='loginFailedMessage' class='initiallyHidden'>Login Failed!</div>
	</div>
	<div id='afterLogin' class='initiallyHidden'>
		<div id='player'>Loading Player</div>
		<div id='channelSelection'></div>
		<input type='button' id='logoutButton' value='Logout'/>
	</div>
</body>
<html>